<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Safelink 2 - Download File</title>
<style>
body {
  background: #1a1123;
  color: #fff;
  font-family: "Poppins", sans-serif;
  text-align: center;
  padding: 50px 10px;
}
.timer-container {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 30px;
  flex-wrap: wrap;
}
.timer-btn {
  background: #2b1940;
  border: 2px solid #b388ff;
  color: #fff;
  padding: 20px;
  border-radius: 12px;
  cursor: pointer;
  width: 120px;
  transition: all .3s;
}
.timer-btn:hover { transform: scale(1.05); }
.overlay {
  display: none;
  position: fixed;
  top:0; left:0; right:0; bottom:0;
  background: rgba(0,0,0,0.9);
  z-index: 9999;
  text-align: center;
  padding-top: 50px;
}
.overlay button {
  margin-top: 20px;
  padding: 10px 20px;
  background: #ff0055;
  border: none;
  color: #fff;
  border-radius: 8px;
}
</style>
</head>
<body>
<h2>ðŸ”’ Final Step: Download File</h2>
<p>Pilih salah satu tombol untuk memulai timer. Jika kamu benar, file akan langsung terunduh.</p>

<div class="timer-container" id="timers"></div>

<div class="overlay" id="adOverlay">
  <h3>Iklan Sponsor</h3>
  <script type="text/javascript">
    atOptions = {
      'key' : 'fe0c4ae1791e506f7b1558972b878705',
      'format' : 'iframe',
      'height' : 250,
      'width' : 300,
      'params' : {}
    };
  </script>
  <script type="text/javascript" src="//www.highperformanceformat.com/fe0c4ae1791e506f7b1558972b878705/invoke.js"></script>
  <script type='text/javascript' src='//pl28014407.effectivegatecpm.com/52/62/5a/52625a84e5cc480ed8f5abfb3b53e58a.js'></script>
  <button onclick="closeAd()">Tutup Iklan</button>
</div>

<script>
const times = [10, 12, 15];
const correctIndex = Math.floor(Math.random() * times.length);
const timersDiv = document.getElementById("timers");
const encoded = location.hash.split('=')[1];
const decodedURL = atob(encoded || "");
const smartLink = "https://www.effectivegatecpm.com/dsb6nckr?key=0b69c9d0a8b1cf8e8083fda807b5ad27";

times.forEach((time, i) => {
  const btn = document.createElement("button");
  btn.className = "timer-btn";
  btn.textContent = `${time} detik`;
  btn.onclick = () => startTimer(btn, time, i);
  timersDiv.appendChild(btn);
});

function startTimer(btn, time, i) {
  if (btn.disabled) return;
  btn.disabled = true;
  let remaining = time;
  const interval = setInterval(() => {
    remaining--;
    btn.textContent = `${remaining}s`;
    if (remaining <= 0) {
      clearInterval(interval);
      btn.textContent = "Download";
      btn.disabled = false;
      btn.onclick = () => {
        if (i === correctIndex) {
          window.location.href = decodedURL;
        } else {
          showAd();
          window.open(smartLink, "_blank");
        }
      };
    }
  }, 1000);
}

function showAd() {
  document.getElementById("adOverlay").style.display = "block";
}
function closeAd() {
  document.getElementById("adOverlay").style.display = "none";
}
</script>
</body>
</html>
